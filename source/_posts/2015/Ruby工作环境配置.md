----
title: Ruby工作环境配置
date: 2015-09-19 22:55:00
updated:
categories: 
- Programming Language
- Ruby
tags:
- Ruby
----

## Ruby安装

Window 环境安装：
可以使用[Rubyinstaller][Rubyinstaller]安装。[ruby安装说明][ruby安装说明]。
进入Rubyinstaller 下载页面。下载：如 : Ruby 2.2.3 (x64) zip版本，解压到适当的目录下面。

**环境配置：**
* RUBY_HOME=ruby所在路径


{% asset_img 456ecd1c-215a-4279-b513-ec2dde23268f.png 环境变量 %}
* path中添加 `%RUBY_HOME%\bin`

{% asset_img path.png 环境变量%}
提示： 你也可以选择安装版(.exe)。安装过程中勾选 `Add Ruby executables to your PATH` 可避免手工配置环境变量。
* 测试  `Win+R` -> 输入：cmd  -> 输入： `ruby --version`。   显示版本信息。


{% asset_img f9285134-ede7-4c40-b787-0567f4342f65.png 环境变量 %}

## RubyDevKit安装
DevKit可用于编译那些gem提供的c或c++的源代码。它本身被编译为了exe，安装的时候会找到ruby的目录，然后修改添加一些文件。这样，在安装那些需要编译的gem时，就直接搞定了
在[Rubyinstaller][Rubyinstaller]下载同版本的RubyDevkit。



{% asset_img f9285134-ede7-4c40-b787-0567f4342f65.png 环境变量 %}
可将其安装到ruby目录下。
进入DevKit目录下
执行 `ruby dk.rb init` 生成`config.yml`文件。

{%asset_img ef2eebd2-82b5-4684-bf81-e89a2623582b.png 环境变量%}
config.yml文件实际上是检测系统安装的ruby的位置并记录在这个文件中。
提示：如上面的命令只针对使用rubyinstall安装的ruby有效，如果是其他方式安装的话，需要手动修改config.yml

**如果为手动配置**
* 创建config.yml
* 增加Ruby的安装目录位置即可。如下
```
# This configuration file contains the absolute path locations of all # installed Rubies to be enhanced to work with the DevKit. This config # file is generated by the 'ruby dk.rb init' step and may be modified # before running the 'ruby dk.rb install' step. To include any installed # Rubies that were not automagically discovered, simply add a line below # the triple hyphens with the absolute path to the Ruby root directory. # # Example: # # --- # - C:/ruby19trunk # - C:/ruby192dev # --- - D:/Program-Software/Programming-Language/Ruby/Ruby
```

然后，执行如下命令，完成安装。 未找到dk.rb
```
ruby dk.rb install
```


{%asset_img 05abe0c6-a0c5-4372-a2b5-41f4afd14ad9.png 环境变量%}
## Rubygems 包管理框架
Rubygems是类似Radhat的RPM、centOS的Yum、Ubuntu的apt-get的应用程序打包部署解决方案。Rubygems本身基于Ruby开发，在Ruby命令行中执行,[rubygemsk下载][rubygems下载]。




{%asset_img 9d5645a3-bfb3-4273-8d1b-3d1f10a2f87c.png 环境变量%}

这里我们选择下载ZIP格式，并将其解压到适当的目录下，例如：ruby同级别的目录。
进入解压目录执行`ruby setup.rb`


{%asset_img f940ced9-c088-4ec9-8b92-b9dcc4381656.png 环境变量%}
ok，你已经安装成功了。


测试gem： 打开一个新的Cmd。输入：gem --version 能够显示版本信息表示ok

{%asset_img b2e867ac-c9ca-49d2-a5e5-7f8506dfd27d.png 环境变量%}
测试devkit: gem install rdiscount --platform=ruby 如果能够成功安装，表示devkit安装ok

{%asset_img 414f6523-0591-4a3b-86c1-6b4fbb6c46a7.png 环境变量%}




## 修改Rubygems 中央仓库

由于使用国外中央仓库，可能部分第三方库被墙，导致无法下载，这里，我们使用淘宝的ruby 仓库

* 添加淘宝`ruby`中央仓库
```
// 添加taobao的源
gem source -a http://ruby.taobao.org
```
* 移除官方中央仓库
```
// 移除官方仓库
gem source -r https://rubygems.org/ 
```





[Rubyinstaller]:http://rubyinstaller.org/downloads/ "Rubyinstaller安装"
[ruby安装说明]:https://www.ruby-lang.org/zh_cn/downloads/ "ryby安装说明"
[rubygems下载]:https://rubygems.org/pages/download "rubygems下载"